var validationCollection = require('./validationCollection');

module.exports = class ValidationProperty
{
    constructor(value)
    {
        this.value = value;
        validationCollection.forEach(validation => 
            this.applyValidation(new validation(value)));
    }

    applyValidation(validation)
    {
        this[validation.ruleName] = function()  
        {
            validation.validate.apply(validation, arguments);
            return this;
        };
    }

    when(isValid)
    {
        if(!isValid) this.ignoreValidationMapping();
        return this;
    }

    ignoreValidationMapping()
    {
        validationCollection.forEach(Validation => 
        {
            let validation = new Validation();
            this[validation.ruleName] = () => this;
        });
    }

}
